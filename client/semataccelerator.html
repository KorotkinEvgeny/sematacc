<head>
    <link href="http://fonts.googleapis.com/css?family=ABeeZee|Krona+One" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="/css/fontello.css"><!--[if IE 7]>
    <link rel="stylesheet" href="/css/fontello-ie7.css"><![endif]-->
    <title>
        Semat Accelerator
    </title>
</head>
<body>
    <div class="top">
        {{loginButtons}}
    </div>
    <div class="wrapper">
        <div class="left">
                <h1>SEMAT Accelerator</h1>
            <div class="hints">
                <h1 class="icon-comment">Hint Box</h1>
                <div class="hint">
                    {{#if currentUser}}
                        {{#unless selectedProjectId}}
                        <p>
                            To create a new project, click the <span class="icon-doc"></span> icon. <br/>
                            Move the mouse hover a project to see the available commands. <br/>
                            Click <span class="icon-play"></span> to accelerate a project.<br/>
                            Click <span class="icon-pencil"></span> to edit a project. <br/>
                            Click <span class="icon-trash"></span> to delete a project. <br/>
                            Click anywhere else to see the project description.
                        </p>
                        {{/unless}}
                    {{else}}
                        <p>
                            Please Login or Register (upper-right corner).
                        </p>
                    {{/if}}
                </div>
            </div>
        </div>
        <div class="center">
            <div class="kernel"> 
                {{#if currentUser}}
                    {{#if selectedProjectId}}
                        {{> kernel}}
                    {{else}}
                        {{> dashboard}}
                    {{/if}}
                {{else}}
                    <h1 id="kernel">Welcome</h1>
                    <h1 id="message"></h1>
                    <div class="dashboard">
                        <div style="padding:30px">
                        <p>
                        Welcome to SematAcc, the Essence Accelerator system.
                        </p>
                        <p>
                            This web prototype was designed to speed up the 
                            learning of <a href="http://semat.org/wp-content/uploads/2012/02/12-08-15.pdf">Essence Theory</a> in Software Engineering and to easily test it with a software project.
                        </p>
                        <p>
                            SematAcc was implemented by <a href="http://www.inf.unibz.it/s4fs">S4FS</a> at the Free University of Bozen-Bolzano an is free for everybody to use.
                        </p>
                        </div>
                    </div>
                {{/if}}
            </div>
        </div>
        <div class="right">
                {{#if currentUser}}
                    {{> graph}}
                {{/if}}
        </div>
    </div>
    <div class="bottom">
        Being developed using cutting-edge <a href="http://meteor.com/">Meteor framework</a> by <a href="http://www.inf.unibz.it/s4fs">S4FS</a> at the <a href="http://www.unibz.it">Free University of Bozen-Bolzano</a>
    </div>
</body>


<template name="dashboard">
    <h1 id="kernel">Projects <a href="#" id="showNewProject" class="icon-doc big" title="Add New Project"></a></h1>
    <h1 id="message"></h1>
        <div class="newProject">
            <ul>
                <li><input type="text" name="projectName" id="nameNewProject" /></li>
                <li><textarea name="projectDescription" id="descriptionNewProject"></textarea></li>
                <li><button id="makeNewProject" class="css3button icon-plus">Add</button></li>
            </ul>
        </div>
        <section class="ac-container">
        {{#if userProjects}}
            {{#each userProjects}}
            <div class="concern-container">
                <input class="accordionitem" id="{{this._id}}" name="{{this._id}}" type="radio"
                {{#if checkable this._id}}checked="checked" {{/if}}/>
                <label for="{{this._id}}" class="accordionlabel">
                    <span class="projectName">
                        {{this.name}}
                    </span>
                    <span class="projectCommands" id="projectCommands{{this._id}}">
                        <a href="#" class="viewProject icon-play" title="Run Project on SematAcc"></a>
                        <a href="#" class="editProject icon-pencil" title="Edit Project"></a>
                        <a href="#" class="deleteProject icon-trash" title="Delete Project"></a>
                    </span>
                </label>
                <article class="ac-large">
                    {{this.description}}
                </article>
            </div>
            {{/each}}
        {{else}}
            <p>
                Please create a new project.
            </p>
        {{/if}}
        </section>
</template>

<template name="kernel">
    <h1 id="kernel">Kernel for {{selectedProjectName}}<a href="#" id="clearSelectedProjectId" class="icon-back big"></a></h1>
    <h1 id="message"></h1>
    <section class="ac-container">
        {{#each concerns}} {{#each alphas this._id}}
        <div class="concern-container">
            <input class="accordionitem" id="{{this._id}}" name="{{this._id}}" type="radio" />
            <label for="{{this._id}}" class="accordionlabel">
            {{this.name}}
            <em>
            {{currentState this.currentStateId}}
            </em>
            </label>
            <article class="ac-small">
                <ul>
                    {{#each states this._id}} {{#if sameId ../this.currentStateId this._id}}
                    <li id="{{this._id}}" class="item selected">
                        <div class="icon-ok">
                        </div>
                        {{else}}
                    <li id="{{this._id}}" class="item selectable">
                        <div>
                        </div>
                        {{/if}} {{this.name}}
                    </li>
                    {{/each}}
                </ul>
            </article>
        </div>
        {{/each}} {{/each}}
    </section>
</template>

<template name="graph">
<h1>Status</h1>
{{#if selectedProjectId}}
    
<div class="graphs">
    <canvas id="graphRoseAlphas" class="graph">
        [No canvas support]
    </canvas>
    <canvas id="graphHbarOverall" class="graph">
        [No canvas support]
    </canvas>
</div>
{{else}}
<div class="graphs">
    <p style="padding:20px">
        Select a project. Graphs will appear in this area.
    </p>
</div>
{{/if}}
</template>