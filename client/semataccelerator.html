<head>
    <link href="http://fonts.googleapis.com/css?family=ABeeZee|Krona+One" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="/css/iconic.css"><!--[if IE 7]>
    <link rel="stylesheet" href="/css/iconic-ie7.css"><![endif]-->
    <title>
        Semat Accelerator
    </title>
</head>
<body>
    <div class="top">
        {{loginButtons}}
    </div>
    <div class="wrapper">
        <div class="left">
                <h1>SEMAT Accelerator</h1>
            <div class="hints">
                <h1 class="icon-comment">Hint Box</h1>
                <div class="hint"></div>
            </div>
        </div>
        <div class="center">
            <div class="kernel"> 
                {{#if currentUser}}
                    {{#if selectedProjectId}}
                        {{> kernel}}
                    {{else}}
                        {{> dashboard}}
                    {{/if}}
                {{else}}
                    <h1 id="kernel">Welcome</h1>
                    <h1 id="message"></h1>
                    <div class="dashboard" style="height:100px">
                        Please Login or Register.
                    </div>
                {{/if}}
            </div>
        </div>
        <div class="right">
                {{#if currentUser}}
                    {{> graph}}
                {{/if}}
        </div>
    </div>
    <div class="bottom">
        Being developed using cutting-edge <a href="http://meteor.com/">Meteor framework</a> by <a href="http://www.inf.unibz.it/s4fs">S4FS</a> at the <a href="http://www.unibz.it">Free University of Bozen-Bolzano</a>
    </div>
</body>


<template name="dashboard">
    <h1 id="kernel">Projects <a href="#" id="showNewProject" class="icon-doc big" title="Add New Project"></a></h1>
    <h1 id="message"></h1>
        <div class="newProject">
            <ul>
                <li><input type="text" name="projectName" id="nameNewProject" /></li>
                <li><textarea name="projectDescription" id="descriptionNewProject"></textarea></li>
                <li><button id="makeNewProject" class="css3button icon-plus-circle">Add</button></li>
            </ul>
        </div>
        <section class="ac-container">
        {{#each userProjects}}
        <div class="concern-container">
            <input class="accordionitem" id="{{this._id}}" name="{{this._id}}" type="radio"
            {{#if checkable this._id}}checked="checked" {{/if}}/>
            <label for="{{this._id}}" class="accordionlabel">
                {{this.name}}
                <a href="#" class="viewProject">{{Open}}</a>
                <a href="#" class="editProject icon-edit" title="Edit Project"></a>
                <a href="#" class="deleteProject icon-trash" title="Delete Project"></a>
            </label>
            <article class="ac-small">
                {{this.description}}
            </article>
        </div>
        {{/each}}
        </section>
</template>

<template name="kernel">
    <h1 id="kernel">Kernel for {{selectedProjectName}}<a href="#" id="clearSelectedProjectId" class="icon-back big"></a></h1>
    <h1 id="message"></h1>
    <section class="ac-container">
        {{#each concerns}} {{#each alphas this._id}}
        <div class="concern-container">
            <input class="accordionitem" id="{{this._id}}" name="{{this._id}}" type="radio"
            {{#if checkable this._id}}checked="checked" {{/if}}/>
            <label for="{{this._id}}" class="accordionlabel">
            {{this.name}}
            <em>
            {{currentState this.currentStateId}}
            </em>
            </label>
            <article class="ac-small">
                <ul>
                    {{#each states this._id}} {{#if sameId ../this.currentStateId this._id}}
                    <li id="{{this._id}}" class="item selected">
                        <div class="icon-ok">
                        </div>
                        {{else}}
                    <li id="{{this._id}}" class="item selectable">
                        <div>
                        </div>
                        {{/if}} {{this.name}}
                    </li>
                    {{/each}}
                </ul>
            </article>
        </div>
        {{/each}} {{/each}}
    </section>
</template>

<template name="graph">
<h1>Status</h1>
{{#if selectedProjectId}}
    
<div class="graphs">
    <canvas id="graphRoseAlphas" class="graph">
        [No canvas support]
    </canvas>
    <canvas id="graphHbarOverall" class="graph">
        [No canvas support]
    </canvas>
</div>
{{else}}
<div class="graphs">
    Select a project. Graphs will appear in this area.
</div>
{{/if}}
</template>